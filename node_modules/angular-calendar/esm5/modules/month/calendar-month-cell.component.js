import * as tslib_1 from "tslib";
import { Component, Input, Output, EventEmitter, TemplateRef } from '@angular/core';
import { isWithinThreshold, trackByEventId } from '../common/util';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from 'angular-draggable-droppable';
import * as ɵngcc3 from '../common/calendar-tooltip.directive';
import * as ɵngcc4 from '../common/click.directive';
import * as ɵngcc5 from '../common/calendar-a11y.pipe';
import * as ɵngcc6 from '../common/calendar-date.pipe';
import * as ɵngcc7 from '../common/calendar-event-title.pipe';

function CalendarMonthCellComponent_ng_template_0_span_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 7);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var day_r217 = ɵngcc0.ɵɵnextContext().day;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(day_r217.badgeTotal);
} }
var _c0 = function (a0) { return { backgroundColor: a0 }; };
var _c1 = function (a0, a1) { return { event: a0, draggedFrom: a1 }; };
var _c2 = function (a0, a1) { return { x: a0, y: a1 }; };
var _c3 = function () { return {}; };
function CalendarMonthCellComponent_ng_template_0_div_7_div_1_Template(rf, ctx) { if (rf & 1) {
    var _r236 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 10);
    ɵngcc0.ɵɵlistener("mouseenter", function CalendarMonthCellComponent_ng_template_0_div_7_div_1_Template_div_mouseenter_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r236); var event_r233 = ctx.$implicit; var highlightDay_r221 = ɵngcc0.ɵɵnextContext(2).highlightDay; return highlightDay_r221.emit({ event: event_r233 }); })("mouseleave", function CalendarMonthCellComponent_ng_template_0_div_7_div_1_Template_div_mouseleave_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r236); var event_r233 = ctx.$implicit; var unhighlightDay_r222 = ɵngcc0.ɵɵnextContext(2).unhighlightDay; return unhighlightDay_r222.emit({ event: event_r233 }); })("mwlClick", function CalendarMonthCellComponent_ng_template_0_div_7_div_1_Template_div_mwlClick_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r236); var event_r233 = ctx.$implicit; var eventClicked_r223 = ɵngcc0.ɵɵnextContext(2).eventClicked; return eventClicked_r223.emit({ event: event_r233, sourceEvent: $event }); });
    ɵngcc0.ɵɵpipe(1, "calendarEventTitle");
    ɵngcc0.ɵɵpipe(2, "calendarA11y");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var event_r233 = ctx.$implicit;
    var ctx_r241 = ɵngcc0.ɵɵnextContext(2);
    var tooltipPlacement_r220 = ctx_r241.tooltipPlacement;
    var tooltipTemplate_r224 = ctx_r241.tooltipTemplate;
    var tooltipAppendToBody_r225 = ctx_r241.tooltipAppendToBody;
    var tooltipDelay_r226 = ctx_r241.tooltipDelay;
    var day_r217 = ctx_r241.day;
    var validateDrag_r228 = ctx_r241.validateDrag;
    ɵngcc0.ɵɵclassProp("cal-draggable", event_r233.draggable);
    ɵngcc0.ɵɵproperty("ngStyle", ɵngcc0.ɵɵpureFunction1(21, _c0, event_r233.color == null ? null : event_r233.color.primary))("ngClass", event_r233 == null ? null : event_r233.cssClass)("mwlCalendarTooltip", ɵngcc0.ɵɵpipeBind3(1, 14, event_r233.title, "monthTooltip", event_r233))("tooltipPlacement", tooltipPlacement_r220)("tooltipEvent", event_r233)("tooltipTemplate", tooltipTemplate_r224)("tooltipAppendToBody", tooltipAppendToBody_r225)("tooltipDelay", tooltipDelay_r226)("dropData", ɵngcc0.ɵɵpureFunction2(23, _c1, event_r233, day_r217))("dragAxis", ɵngcc0.ɵɵpureFunction2(26, _c2, event_r233.draggable, event_r233.draggable))("validateDrag", validateDrag_r228);
    ɵngcc0.ɵɵattribute("aria-hidden", ɵngcc0.ɵɵpipeBind2(2, 18, ɵngcc0.ɵɵpureFunction0(29, _c3), "hideMonthCellEvents"));
} }
function CalendarMonthCellComponent_ng_template_0_div_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 8);
    ɵngcc0.ɵɵtemplate(1, CalendarMonthCellComponent_ng_template_0_div_7_div_1_Template, 3, 30, "div", 9);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r242 = ɵngcc0.ɵɵnextContext();
    var day_r217 = ctx_r242.day;
    var trackByEventId_r227 = ctx_r242.trackByEventId;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", day_r217.events)("ngForTrackBy", trackByEventId_r227);
} }
var _c4 = function (a0, a1) { return { day: a0, locale: a1 }; };
function CalendarMonthCellComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 2);
    ɵngcc0.ɵɵpipe(1, "calendarA11y");
    ɵngcc0.ɵɵelementStart(2, "span", 3);
    ɵngcc0.ɵɵtemplate(3, CalendarMonthCellComponent_ng_template_0_span_3_Template, 2, 1, "span", 4);
    ɵngcc0.ɵɵelementStart(4, "span", 5);
    ɵngcc0.ɵɵtext(5);
    ɵngcc0.ɵɵpipe(6, "calendarDate");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(7, CalendarMonthCellComponent_ng_template_0_div_7_Template, 2, 2, "div", 6);
} if (rf & 2) {
    var day_r217 = ctx.day;
    var locale_r219 = ctx.locale;
    ɵngcc0.ɵɵattribute("aria-label", ɵngcc0.ɵɵpipeBind2(1, 4, ɵngcc0.ɵɵpureFunction2(11, _c4, day_r217, locale_r219), "monthCell"));
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("ngIf", day_r217.badgeTotal > 0);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind3(6, 7, day_r217.date, "monthViewDayNumber", locale_r219));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", day_r217.events.length > 0);
} }
function CalendarMonthCellComponent_ng_template_2_Template(rf, ctx) { }
var _c5 = function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11) { return { day: a0, openDay: a1, locale: a2, tooltipPlacement: a3, highlightDay: a4, unhighlightDay: a5, eventClicked: a6, tooltipTemplate: a7, tooltipAppendToBody: a8, tooltipDelay: a9, trackByEventId: a10, validateDrag: a11 }; };
var CalendarMonthCellComponent = /** @class */ (function () {
    function CalendarMonthCellComponent() {
        this.highlightDay = new EventEmitter();
        this.unhighlightDay = new EventEmitter();
        this.eventClicked = new EventEmitter();
        this.trackByEventId = trackByEventId;
        this.validateDrag = isWithinThreshold;
    }
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object)
    ], CalendarMonthCellComponent.prototype, "day", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object)
    ], CalendarMonthCellComponent.prototype, "openDay", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String)
    ], CalendarMonthCellComponent.prototype, "locale", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object)
    ], CalendarMonthCellComponent.prototype, "tooltipPlacement", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Boolean)
    ], CalendarMonthCellComponent.prototype, "tooltipAppendToBody", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", TemplateRef)
    ], CalendarMonthCellComponent.prototype, "customTemplate", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", TemplateRef)
    ], CalendarMonthCellComponent.prototype, "tooltipTemplate", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Number)
    ], CalendarMonthCellComponent.prototype, "tooltipDelay", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", EventEmitter)
    ], CalendarMonthCellComponent.prototype, "highlightDay", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", EventEmitter)
    ], CalendarMonthCellComponent.prototype, "unhighlightDay", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", Object)
    ], CalendarMonthCellComponent.prototype, "eventClicked", void 0);
CalendarMonthCellComponent.ɵfac = function CalendarMonthCellComponent_Factory(t) { return new (t || CalendarMonthCellComponent)(); };
CalendarMonthCellComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CalendarMonthCellComponent, selectors: [["mwl-calendar-month-cell"]], hostAttrs: [1, "cal-cell", "cal-day-cell"], hostVars: 18, hostBindings: function CalendarMonthCellComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("cal-past", ctx.day.isPast)("cal-today", ctx.day.isToday)("cal-future", ctx.day.isFuture)("cal-weekend", ctx.day.isWeekend)("cal-in-month", ctx.day.inMonth)("cal-out-month", !ctx.day.inMonth)("cal-has-events", ctx.day.events.length > 0)("cal-open", ctx.day === ctx.openDay)("cal-event-highlight", !!ctx.day.backgroundColor);
    } }, inputs: { day: "day", openDay: "openDay", locale: "locale", tooltipPlacement: "tooltipPlacement", tooltipAppendToBody: "tooltipAppendToBody", customTemplate: "customTemplate", tooltipTemplate: "tooltipTemplate", tooltipDelay: "tooltipDelay" }, outputs: { highlightDay: "highlightDay", unhighlightDay: "unhighlightDay", eventClicked: "eventClicked" }, decls: 3, vars: 15, consts: [["defaultTemplate", ""], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], [1, "cal-cell-top"], ["aria-hidden", "true"], ["class", "cal-day-badge", 4, "ngIf"], [1, "cal-day-number"], ["class", "cal-events", 4, "ngIf"], [1, "cal-day-badge"], [1, "cal-events"], ["class", "cal-event", "mwlDraggable", "", "dragActiveClass", "cal-drag-active", 3, "ngStyle", "ngClass", "mwlCalendarTooltip", "tooltipPlacement", "tooltipEvent", "tooltipTemplate", "tooltipAppendToBody", "tooltipDelay", "cal-draggable", "dropData", "dragAxis", "validateDrag", "mouseenter", "mouseleave", "mwlClick", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["mwlDraggable", "", "dragActiveClass", "cal-drag-active", 1, "cal-event", 3, "ngStyle", "ngClass", "mwlCalendarTooltip", "tooltipPlacement", "tooltipEvent", "tooltipTemplate", "tooltipAppendToBody", "tooltipDelay", "dropData", "dragAxis", "validateDrag", "mouseenter", "mouseleave", "mwlClick"]], template: function CalendarMonthCellComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, CalendarMonthCellComponent_ng_template_0_Template, 8, 14, "ng-template", null, 0, ɵngcc0.ɵɵtemplateRefExtractor);
        ɵngcc0.ɵɵtemplate(2, CalendarMonthCellComponent_ng_template_2_Template, 0, 0, "ng-template", 1);
    } if (rf & 2) {
        var _r214 = ɵngcc0.ɵɵreference(1);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx.customTemplate || _r214)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunctionV(2, _c5, [ctx.day, ctx.openDay, ctx.locale, ctx.tooltipPlacement, ctx.highlightDay, ctx.unhighlightDay, ctx.eventClicked, ctx.tooltipTemplate, ctx.tooltipAppendToBody, ctx.tooltipDelay, ctx.trackByEventId, ctx.validateDrag]));
    } }, directives: [ɵngcc1.NgTemplateOutlet, ɵngcc1.NgIf, ɵngcc1.NgForOf, ɵngcc2.ɵb, ɵngcc1.NgStyle, ɵngcc1.NgClass, ɵngcc3.CalendarTooltipDirective, ɵngcc4.ClickDirective], pipes: [ɵngcc5.CalendarA11yPipe, ɵngcc6.CalendarDatePipe, ɵngcc7.CalendarEventTitlePipe], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CalendarMonthCellComponent, [{
        type: Component,
        args: [{
                selector: 'mwl-calendar-month-cell',
                template: "\n    <ng-template\n      #defaultTemplate\n      let-day=\"day\"\n      let-openDay=\"openDay\"\n      let-locale=\"locale\"\n      let-tooltipPlacement=\"tooltipPlacement\"\n      let-highlightDay=\"highlightDay\"\n      let-unhighlightDay=\"unhighlightDay\"\n      let-eventClicked=\"eventClicked\"\n      let-tooltipTemplate=\"tooltipTemplate\"\n      let-tooltipAppendToBody=\"tooltipAppendToBody\"\n      let-tooltipDelay=\"tooltipDelay\"\n      let-trackByEventId=\"trackByEventId\"\n      let-validateDrag=\"validateDrag\"\n    >\n      <div\n        class=\"cal-cell-top\"\n        [attr.aria-label]=\"\n          { day: day, locale: locale } | calendarA11y: 'monthCell'\n        \"\n      >\n        <span aria-hidden=\"true\">\n          <span class=\"cal-day-badge\" *ngIf=\"day.badgeTotal > 0\">{{\n            day.badgeTotal\n          }}</span>\n          <span class=\"cal-day-number\">{{\n            day.date | calendarDate: 'monthViewDayNumber':locale\n          }}</span>\n        </span>\n      </div>\n      <div class=\"cal-events\" *ngIf=\"day.events.length > 0\">\n        <div\n          class=\"cal-event\"\n          *ngFor=\"let event of day.events; trackBy: trackByEventId\"\n          [ngStyle]=\"{ backgroundColor: event.color?.primary }\"\n          [ngClass]=\"event?.cssClass\"\n          (mouseenter)=\"highlightDay.emit({ event: event })\"\n          (mouseleave)=\"unhighlightDay.emit({ event: event })\"\n          [mwlCalendarTooltip]=\"\n            event.title | calendarEventTitle: 'monthTooltip':event\n          \"\n          [tooltipPlacement]=\"tooltipPlacement\"\n          [tooltipEvent]=\"event\"\n          [tooltipTemplate]=\"tooltipTemplate\"\n          [tooltipAppendToBody]=\"tooltipAppendToBody\"\n          [tooltipDelay]=\"tooltipDelay\"\n          mwlDraggable\n          [class.cal-draggable]=\"event.draggable\"\n          dragActiveClass=\"cal-drag-active\"\n          [dropData]=\"{ event: event, draggedFrom: day }\"\n          [dragAxis]=\"{ x: event.draggable, y: event.draggable }\"\n          [validateDrag]=\"validateDrag\"\n          (mwlClick)=\"eventClicked.emit({ event: event, sourceEvent: $event })\"\n          [attr.aria-hidden]=\"{} | calendarA11y: 'hideMonthCellEvents'\"\n        ></div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\n      [ngTemplateOutletContext]=\"{\n        day: day,\n        openDay: openDay,\n        locale: locale,\n        tooltipPlacement: tooltipPlacement,\n        highlightDay: highlightDay,\n        unhighlightDay: unhighlightDay,\n        eventClicked: eventClicked,\n        tooltipTemplate: tooltipTemplate,\n        tooltipAppendToBody: tooltipAppendToBody,\n        tooltipDelay: tooltipDelay,\n        trackByEventId: trackByEventId,\n        validateDrag: validateDrag\n      }\"\n    >\n    </ng-template>\n  ",
                host: {
                    class: 'cal-cell cal-day-cell',
                    '[class.cal-past]': 'day.isPast',
                    '[class.cal-today]': 'day.isToday',
                    '[class.cal-future]': 'day.isFuture',
                    '[class.cal-weekend]': 'day.isWeekend',
                    '[class.cal-in-month]': 'day.inMonth',
                    '[class.cal-out-month]': '!day.inMonth',
                    '[class.cal-has-events]': 'day.events.length > 0',
                    '[class.cal-open]': 'day === openDay',
                    '[class.cal-event-highlight]': '!!day.backgroundColor'
                }
            }]
    }], function () { return []; }, { highlightDay: [{
            type: Output
        }], unhighlightDay: [{
            type: Output
        }], eventClicked: [{
            type: Output
        }], day: [{
            type: Input
        }], openDay: [{
            type: Input
        }], locale: [{
            type: Input
        }], tooltipPlacement: [{
            type: Input
        }], tooltipAppendToBody: [{
            type: Input
        }], customTemplate: [{
            type: Input
        }], tooltipTemplate: [{
            type: Input
        }], tooltipDelay: [{
            type: Input
        }] }); })();
    return CalendarMonthCellComponent;
}());
export { CalendarMonthCellComponent };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNwcm8va3JpdHNhZGVlL1NWTi9DeWJlcnNvZnQvYXBleC9ub2RlX21vZHVsZXMvYW5ndWxhci1jYWxlbmRhci9lc201L21vZHVsZXMvbW9udGgvY2FsZW5kYXItbW9udGgtY2VsbC5jb21wb25lbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3FFQW1EcUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBa0JsQyIsImZpbGUiOiJjYWxlbmRhci1tb250aC1jZWxsLmNvbXBvbmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGlzV2l0aGluVGhyZXNob2xkLCB0cmFja0J5RXZlbnRJZCB9IGZyb20gJy4uL2NvbW1vbi91dGlsJztcbnZhciBDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudCgpIHtcbiAgICAgICAgdGhpcy5oaWdobGlnaHREYXkgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMudW5oaWdobGlnaHREYXkgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZXZlbnRDbGlja2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnRyYWNrQnlFdmVudElkID0gdHJhY2tCeUV2ZW50SWQ7XG4gICAgICAgIHRoaXMudmFsaWRhdGVEcmFnID0gaXNXaXRoaW5UaHJlc2hvbGQ7XG4gICAgfVxuICAgIHRzbGliXzEuX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIHRzbGliXzEuX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbiAgICBdLCBDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF5XCIsIHZvaWQgMCk7XG4gICAgdHNsaWJfMS5fX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgdHNsaWJfMS5fX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIENhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGVuRGF5XCIsIHZvaWQgMCk7XG4gICAgdHNsaWJfMS5fX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgdHNsaWJfMS5fX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuICAgIF0sIENhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsb2NhbGVcIiwgdm9pZCAwKTtcbiAgICB0c2xpYl8xLl9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICB0c2xpYl8xLl9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG4gICAgXSwgQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInRvb2x0aXBQbGFjZW1lbnRcIiwgdm9pZCAwKTtcbiAgICB0c2xpYl8xLl9fZGVjb3JhdGUoW1xuICAgICAgICBJbnB1dCgpLFxuICAgICAgICB0c2xpYl8xLl9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuICAgIF0sIENhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0b29sdGlwQXBwZW5kVG9Cb2R5XCIsIHZvaWQgMCk7XG4gICAgdHNsaWJfMS5fX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgdHNsaWJfMS5fX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVGVtcGxhdGVSZWYpXG4gICAgXSwgQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcImN1c3RvbVRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgdHNsaWJfMS5fX2RlY29yYXRlKFtcbiAgICAgICAgSW5wdXQoKSxcbiAgICAgICAgdHNsaWJfMS5fX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVGVtcGxhdGVSZWYpXG4gICAgXSwgQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQucHJvdG90eXBlLCBcInRvb2x0aXBUZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIHRzbGliXzEuX19kZWNvcmF0ZShbXG4gICAgICAgIElucHV0KCksXG4gICAgICAgIHRzbGliXzEuX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbiAgICBdLCBDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwidG9vbHRpcERlbGF5XCIsIHZvaWQgMCk7XG4gICAgdHNsaWJfMS5fX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIHRzbGliXzEuX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwiaGlnaGxpZ2h0RGF5XCIsIHZvaWQgMCk7XG4gICAgdHNsaWJfMS5fX2RlY29yYXRlKFtcbiAgICAgICAgT3V0cHV0KCksXG4gICAgICAgIHRzbGliXzEuX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbiAgICBdLCBDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm90b3R5cGUsIFwidW5oaWdobGlnaHREYXlcIiwgdm9pZCAwKTtcbiAgICB0c2xpYl8xLl9fZGVjb3JhdGUoW1xuICAgICAgICBPdXRwdXQoKSxcbiAgICAgICAgdHNsaWJfMS5fX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIENhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LnByb3RvdHlwZSwgXCJldmVudENsaWNrZWRcIiwgdm9pZCAwKTtcbiAgICBDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudCA9IHRzbGliXzEuX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBvbmVudCh7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ213bC1jYWxlbmRhci1tb250aC1jZWxsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8bmctdGVtcGxhdGVcXG4gICAgICAjZGVmYXVsdFRlbXBsYXRlXFxuICAgICAgbGV0LWRheT1cXFwiZGF5XFxcIlxcbiAgICAgIGxldC1vcGVuRGF5PVxcXCJvcGVuRGF5XFxcIlxcbiAgICAgIGxldC1sb2NhbGU9XFxcImxvY2FsZVxcXCJcXG4gICAgICBsZXQtdG9vbHRpcFBsYWNlbWVudD1cXFwidG9vbHRpcFBsYWNlbWVudFxcXCJcXG4gICAgICBsZXQtaGlnaGxpZ2h0RGF5PVxcXCJoaWdobGlnaHREYXlcXFwiXFxuICAgICAgbGV0LXVuaGlnaGxpZ2h0RGF5PVxcXCJ1bmhpZ2hsaWdodERheVxcXCJcXG4gICAgICBsZXQtZXZlbnRDbGlja2VkPVxcXCJldmVudENsaWNrZWRcXFwiXFxuICAgICAgbGV0LXRvb2x0aXBUZW1wbGF0ZT1cXFwidG9vbHRpcFRlbXBsYXRlXFxcIlxcbiAgICAgIGxldC10b29sdGlwQXBwZW5kVG9Cb2R5PVxcXCJ0b29sdGlwQXBwZW5kVG9Cb2R5XFxcIlxcbiAgICAgIGxldC10b29sdGlwRGVsYXk9XFxcInRvb2x0aXBEZWxheVxcXCJcXG4gICAgICBsZXQtdHJhY2tCeUV2ZW50SWQ9XFxcInRyYWNrQnlFdmVudElkXFxcIlxcbiAgICAgIGxldC12YWxpZGF0ZURyYWc9XFxcInZhbGlkYXRlRHJhZ1xcXCJcXG4gICAgPlxcbiAgICAgIDxkaXZcXG4gICAgICAgIGNsYXNzPVxcXCJjYWwtY2VsbC10b3BcXFwiXFxuICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cXFwiXFxuICAgICAgICAgIHsgZGF5OiBkYXksIGxvY2FsZTogbG9jYWxlIH0gfCBjYWxlbmRhckExMXk6ICdtb250aENlbGwnXFxuICAgICAgICBcXFwiXFxuICAgICAgPlxcbiAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPlxcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiY2FsLWRheS1iYWRnZVxcXCIgKm5nSWY9XFxcImRheS5iYWRnZVRvdGFsID4gMFxcXCI+e3tcXG4gICAgICAgICAgICBkYXkuYmFkZ2VUb3RhbFxcbiAgICAgICAgICB9fTwvc3Bhbj5cXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImNhbC1kYXktbnVtYmVyXFxcIj57e1xcbiAgICAgICAgICAgIGRheS5kYXRlIHwgY2FsZW5kYXJEYXRlOiAnbW9udGhWaWV3RGF5TnVtYmVyJzpsb2NhbGVcXG4gICAgICAgICAgfX08L3NwYW4+XFxuICAgICAgICA8L3NwYW4+XFxuICAgICAgPC9kaXY+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY2FsLWV2ZW50c1xcXCIgKm5nSWY9XFxcImRheS5ldmVudHMubGVuZ3RoID4gMFxcXCI+XFxuICAgICAgICA8ZGl2XFxuICAgICAgICAgIGNsYXNzPVxcXCJjYWwtZXZlbnRcXFwiXFxuICAgICAgICAgICpuZ0Zvcj1cXFwibGV0IGV2ZW50IG9mIGRheS5ldmVudHM7IHRyYWNrQnk6IHRyYWNrQnlFdmVudElkXFxcIlxcbiAgICAgICAgICBbbmdTdHlsZV09XFxcInsgYmFja2dyb3VuZENvbG9yOiBldmVudC5jb2xvcj8ucHJpbWFyeSB9XFxcIlxcbiAgICAgICAgICBbbmdDbGFzc109XFxcImV2ZW50Py5jc3NDbGFzc1xcXCJcXG4gICAgICAgICAgKG1vdXNlZW50ZXIpPVxcXCJoaWdobGlnaHREYXkuZW1pdCh7IGV2ZW50OiBldmVudCB9KVxcXCJcXG4gICAgICAgICAgKG1vdXNlbGVhdmUpPVxcXCJ1bmhpZ2hsaWdodERheS5lbWl0KHsgZXZlbnQ6IGV2ZW50IH0pXFxcIlxcbiAgICAgICAgICBbbXdsQ2FsZW5kYXJUb29sdGlwXT1cXFwiXFxuICAgICAgICAgICAgZXZlbnQudGl0bGUgfCBjYWxlbmRhckV2ZW50VGl0bGU6ICdtb250aFRvb2x0aXAnOmV2ZW50XFxuICAgICAgICAgIFxcXCJcXG4gICAgICAgICAgW3Rvb2x0aXBQbGFjZW1lbnRdPVxcXCJ0b29sdGlwUGxhY2VtZW50XFxcIlxcbiAgICAgICAgICBbdG9vbHRpcEV2ZW50XT1cXFwiZXZlbnRcXFwiXFxuICAgICAgICAgIFt0b29sdGlwVGVtcGxhdGVdPVxcXCJ0b29sdGlwVGVtcGxhdGVcXFwiXFxuICAgICAgICAgIFt0b29sdGlwQXBwZW5kVG9Cb2R5XT1cXFwidG9vbHRpcEFwcGVuZFRvQm9keVxcXCJcXG4gICAgICAgICAgW3Rvb2x0aXBEZWxheV09XFxcInRvb2x0aXBEZWxheVxcXCJcXG4gICAgICAgICAgbXdsRHJhZ2dhYmxlXFxuICAgICAgICAgIFtjbGFzcy5jYWwtZHJhZ2dhYmxlXT1cXFwiZXZlbnQuZHJhZ2dhYmxlXFxcIlxcbiAgICAgICAgICBkcmFnQWN0aXZlQ2xhc3M9XFxcImNhbC1kcmFnLWFjdGl2ZVxcXCJcXG4gICAgICAgICAgW2Ryb3BEYXRhXT1cXFwieyBldmVudDogZXZlbnQsIGRyYWdnZWRGcm9tOiBkYXkgfVxcXCJcXG4gICAgICAgICAgW2RyYWdBeGlzXT1cXFwieyB4OiBldmVudC5kcmFnZ2FibGUsIHk6IGV2ZW50LmRyYWdnYWJsZSB9XFxcIlxcbiAgICAgICAgICBbdmFsaWRhdGVEcmFnXT1cXFwidmFsaWRhdGVEcmFnXFxcIlxcbiAgICAgICAgICAobXdsQ2xpY2spPVxcXCJldmVudENsaWNrZWQuZW1pdCh7IGV2ZW50OiBldmVudCwgc291cmNlRXZlbnQ6ICRldmVudCB9KVxcXCJcXG4gICAgICAgICAgW2F0dHIuYXJpYS1oaWRkZW5dPVxcXCJ7fSB8IGNhbGVuZGFyQTExeTogJ2hpZGVNb250aENlbGxFdmVudHMnXFxcIlxcbiAgICAgICAgPjwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L25nLXRlbXBsYXRlPlxcbiAgICA8bmctdGVtcGxhdGVcXG4gICAgICBbbmdUZW1wbGF0ZU91dGxldF09XFxcImN1c3RvbVRlbXBsYXRlIHx8IGRlZmF1bHRUZW1wbGF0ZVxcXCJcXG4gICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVxcXCJ7XFxuICAgICAgICBkYXk6IGRheSxcXG4gICAgICAgIG9wZW5EYXk6IG9wZW5EYXksXFxuICAgICAgICBsb2NhbGU6IGxvY2FsZSxcXG4gICAgICAgIHRvb2x0aXBQbGFjZW1lbnQ6IHRvb2x0aXBQbGFjZW1lbnQsXFxuICAgICAgICBoaWdobGlnaHREYXk6IGhpZ2hsaWdodERheSxcXG4gICAgICAgIHVuaGlnaGxpZ2h0RGF5OiB1bmhpZ2hsaWdodERheSxcXG4gICAgICAgIGV2ZW50Q2xpY2tlZDogZXZlbnRDbGlja2VkLFxcbiAgICAgICAgdG9vbHRpcFRlbXBsYXRlOiB0b29sdGlwVGVtcGxhdGUsXFxuICAgICAgICB0b29sdGlwQXBwZW5kVG9Cb2R5OiB0b29sdGlwQXBwZW5kVG9Cb2R5LFxcbiAgICAgICAgdG9vbHRpcERlbGF5OiB0b29sdGlwRGVsYXksXFxuICAgICAgICB0cmFja0J5RXZlbnRJZDogdHJhY2tCeUV2ZW50SWQsXFxuICAgICAgICB2YWxpZGF0ZURyYWc6IHZhbGlkYXRlRHJhZ1xcbiAgICAgIH1cXFwiXFxuICAgID5cXG4gICAgPC9uZy10ZW1wbGF0ZT5cXG4gIFwiLFxuICAgICAgICAgICAgaG9zdDoge1xuICAgICAgICAgICAgICAgIGNsYXNzOiAnY2FsLWNlbGwgY2FsLWRheS1jZWxsJyxcbiAgICAgICAgICAgICAgICAnW2NsYXNzLmNhbC1wYXN0XSc6ICdkYXkuaXNQYXN0JyxcbiAgICAgICAgICAgICAgICAnW2NsYXNzLmNhbC10b2RheV0nOiAnZGF5LmlzVG9kYXknLFxuICAgICAgICAgICAgICAgICdbY2xhc3MuY2FsLWZ1dHVyZV0nOiAnZGF5LmlzRnV0dXJlJyxcbiAgICAgICAgICAgICAgICAnW2NsYXNzLmNhbC13ZWVrZW5kXSc6ICdkYXkuaXNXZWVrZW5kJyxcbiAgICAgICAgICAgICAgICAnW2NsYXNzLmNhbC1pbi1tb250aF0nOiAnZGF5LmluTW9udGgnLFxuICAgICAgICAgICAgICAgICdbY2xhc3MuY2FsLW91dC1tb250aF0nOiAnIWRheS5pbk1vbnRoJyxcbiAgICAgICAgICAgICAgICAnW2NsYXNzLmNhbC1oYXMtZXZlbnRzXSc6ICdkYXkuZXZlbnRzLmxlbmd0aCA+IDAnLFxuICAgICAgICAgICAgICAgICdbY2xhc3MuY2FsLW9wZW5dJzogJ2RheSA9PT0gb3BlbkRheScsXG4gICAgICAgICAgICAgICAgJ1tjbGFzcy5jYWwtZXZlbnQtaGlnaGxpZ2h0XSc6ICchIWRheS5iYWNrZ3JvdW5kQ29sb3InXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgXSwgQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQpO1xuICAgIHJldHVybiBDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudDtcbn0oKSk7XG5leHBvcnQgeyBDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudCB9O1xuIl19